{% extends "layout.html" %}
{% from "setlist.html" import setlist with context %}
{% set title = "Dataset" %}
{% block body %}
  <h2>Dataset: {{ set.name }}</h2>
  {%- if set.children %}
  <p>Subsets:</p>
  {{ setlist(set.children) }}
  {%- endif %}
  {%- if set.datas %}
  <p>Data in this set (<a href="{{ url_for('setimport', id=set.id) }}">import data</a>):</p>
  <table id="datatable2" class="table table-condensed table-bordered table-striped">
    <thead>
      <tr>
        <th>#</th>
        <th>Name</th>
        <th>Context</th>
        <th>Entries</th>
        <th>Created</th>
        {% for p in params %}
        <th rel="tooltip" title="{{ p.brief }}">{{ p.name }} ({{ p.unit }})</th>
        {% endfor %}
      </tr>
    </thead>
    <tbody>
    {%- for data in set.datas %}
      <tr>
        <td>{{ loop.index }}</td>
        <td><a href="{{ url_for('data', id=data.id) }}">{{ data.name }}</a></td>
        <td>{{ data.context.name }}</td>
        <td>{{ data.entries|length }}</td>
        <td>{{ data.created|dtformat }}</td>
        {% for pv in pvalues[loop.index0] %}
        <td>{{ pv|dataformat }}</td>
        {% endfor %}
      </tr>
    {%- endfor %}
    </tbody>
  </table>
  <script>
    $(document).ready(function() { $('#datatable2').dataTable({
    "bLengthChange": false, "bPaginate": false}); });
  </script>
  {%- endif %}
{% endblock %}
